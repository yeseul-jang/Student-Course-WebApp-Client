{"ast":null,"code":"var _jsxFileName = \"/Users/kyungjin/Student-Course-WebApp-Client/src/components/Login.js\";\nimport React, { useState, useEffect } from 'react'; //import ReactDOM from 'react-dom';\n\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom'; //\n\nimport View from './View'; //\n\nfunction Login(props) {\n  //state variable for the screen, admin or user\n  const [screen, setScreen] = useState('auth'); //store input field data, student number and password\n\n  const [studentNumber, setStudentNumber] = useState();\n  const [password, setPassword] = useState();\n  const apiUrl = \"http://localhost:3000/signin\";\n  const [fullName, setFullName] = useState(''); //send studentNumber and password to the server\n  // for initial authentication\n\n  const auth = async () => {\n    console.log('calling auth');\n    console.log(studentNumber);\n\n    try {\n      //make a get request to /authenticate end-point on the server\n      const loginData = {\n        auth: {\n          studentNumber,\n          password\n        }\n      }; //call api\n\n      const res = await axios.post(apiUrl, loginData);\n      console.log(res.data.auth);\n      console.log(res.data.screen);\n      console.log(res.data.fullName); //process the response\n\n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n        setFullName(res.data.fullName);\n        console.log(res.data.screen);\n      }\n    } catch (e) {\n      //print the error\n      console.log(e);\n    }\n  }; //check if the user already logged-in\n\n\n  const readCookie = async () => {\n    try {\n      //\n      console.log('--- in readCookie function ---');\n      const res = await axios.get('/read_cookie'); // \n\n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n        console.log(res.data.screen);\n      }\n    } catch (e) {\n      setScreen('auth');\n      console.log(e);\n    }\n  }; //runs the first time the view is rendered\n  //to check if user is signed in\n\n\n  useEffect(() => {\n    readCookie();\n  }, []);\n\n  const register = () => {\n    props.history.push({\n      pathname: '/createStudent'\n    });\n  }; //\n\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \" Kyungjin and Yeseul Lab3 \"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"React front-end calls Express REST API to add, list, update, or delete a user\")), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"LoginForm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, screen === 'auth' ? React.createElement(Form, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    controlId: \"formBasicEmail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Student Number\"), React.createElement(Form.Control, {\n    type: \"email\",\n    placeholder: \"Enter student number\",\n    type: \"text\",\n    onChange: e => setStudentNumber(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  })), React.createElement(Form.Group, {\n    controlId: \"formBasicPassword\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Password\"), React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Password\",\n    onChange: e => setPassword(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"Buttons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"primary\",\n    onClick: auth,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), React.createElement(Button, {\n    variant: \"success\",\n    onClick: () => {\n      register();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"Regester\"))) : React.createElement(View, {\n    screen: screen,\n    setScreen: setScreen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  })));\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["/Users/kyungjin/Student-Course-WebApp-Client/src/components/Login.js"],"names":["React","useState","useEffect","Jumbotron","Form","Button","axios","withRouter","View","Login","props","screen","setScreen","studentNumber","setStudentNumber","password","setPassword","apiUrl","fullName","setFullName","auth","console","log","loginData","res","post","data","undefined","e","readCookie","get","register","history","push","pathname","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n//import ReactDOM from 'react-dom';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\n//\nimport View from './View'\n//\nfunction Login(props) {\n  //state variable for the screen, admin or user\n  const [screen, setScreen] = useState('auth');\n  //store input field data, student number and password\n  const [studentNumber, setStudentNumber] = useState();\n  const [password, setPassword] = useState();\n  const apiUrl = \"http://localhost:3000/signin\";\n  const [fullName, setFullName] = useState('');\n\n  //send studentNumber and password to the server\n  // for initial authentication\n  const auth = async () => {\n    console.log('calling auth')\n    console.log(studentNumber)\n\n    try {\n      //make a get request to /authenticate end-point on the server\n      const loginData = { auth: { studentNumber, password } }\n      //call api\n      const res = await axios.post(apiUrl, loginData);\n      console.log(res.data.auth);\n      console.log(res.data.screen);\n      console.log(res.data.fullName);\n      //process the response\n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n        setFullName(res.data.fullName);\n        \n        console.log(res.data.screen);\n      }\n    } catch (e) { //print the error\n      console.log(e);\n    }\n\n  };\n\n  //check if the user already logged-in\n  const readCookie = async () => {\n    try {\n      //\n      console.log('--- in readCookie function ---');\n      const res = await axios.get('/read_cookie');\n      // \n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n        console.log(res.data.screen);\n      }\n    } catch (e) {\n      setScreen('auth');\n      console.log(e);\n    }\n  };\n  //runs the first time the view is rendered\n  //to check if user is signed in\n  useEffect(() => {\n    readCookie();\n  }, []);\n\n  const register = () => {\n    props.history.push({\n      pathname: '/createStudent'\n    });\n  }\n\n  //\n  return (\n    <div>\n      <div className=\"App\">\n        <h2> Kyungjin and Yeseul Lab3 </h2>\n        <p>React front-end calls Express REST API to add, list, update, or delete a user</p>\n      </div>\n      <br /><br />\n      <div className=\"LoginForm\">\n        {screen === 'auth'\n          ?\n          <Form>\n            <Form.Group controlId=\"formBasicEmail\">\n              <Form.Label>Student Number</Form.Label>\n              <Form.Control type=\"email\" placeholder=\"Enter student number\" type=\"text\" onChange={e => setStudentNumber(e.target.value)}/>\n            </Form.Group>\n\n            <Form.Group controlId=\"formBasicPassword\">\n              <Form.Label>Password</Form.Label>\n              <Form.Control type=\"password\" placeholder=\"Password\" onChange={e => setPassword(e.target.value)}/>\n            </Form.Group>\n            <div className=\"Buttons\">\n              <Button variant=\"primary\" onClick={auth}>Login</Button><br /><br />\n              <Button variant=\"success\" onClick={() => { register() }}>Regester</Button>\n            </div>\n          </Form>\n          : <View screen={screen} setScreen={setScreen} />\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default withRouter(Login);\n\n"]},"metadata":{},"sourceType":"module"}